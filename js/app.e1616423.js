(function(e){function t(t){for(var a,r,o=t[0],u=t[1],p=t[2],l=0,d=[];l<o.length;l++)r=o[l],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&d.push(s[r][0]),s[r]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);c&&c(t);while(d.length)d.shift()();return i.push.apply(i,p||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,r=1;r<n.length;r++){var o=n[r];0!==s[o]&&(a=!1)}a&&(i.splice(t--,1),e=u(u.s=n[0]))}return e}var a={},r={app:0},s={app:0},i=[];function o(e){return u.p+"js/"+({}[e]||e)+"."+{"chunk-07c116d6":"6c3deb11","chunk-3f42c1fd":"45a7ae4e"}[e]+".js"}function u(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n={"chunk-07c116d6":1,"chunk-3f42c1fd":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var a="css/"+({}[e]||e)+"."+{"chunk-07c116d6":"fd1f2fa0","chunk-3f42c1fd":"b6a15c90"}[e]+".css",s=u.p+a,i=document.getElementsByTagName("link"),o=0;o<i.length;o++){var p=i[o],l=p.getAttribute("data-href")||p.getAttribute("href");if("stylesheet"===p.rel&&(l===a||l===s))return t()}var d=document.getElementsByTagName("style");for(o=0;o<d.length;o++){p=d[o],l=p.getAttribute("data-href");if(l===a||l===s)return t()}var c=document.createElement("link");c.rel="stylesheet",c.type="text/css",c.onload=t,c.onerror=function(t){var a=t&&t.target&&t.target.src||s,i=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=a,delete r[e],c.parentNode.removeChild(c),n(i)},c.href=s;var y=document.getElementsByTagName("head")[0];y.appendChild(c)})).then((function(){r[e]=0})));var a=s[e];if(0!==a)if(a)t.push(a[2]);else{var i=new Promise((function(t,n){a=s[e]=[t,n]}));t.push(a[2]=i);var p,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=o(e);var d=new Error;p=function(t){l.onerror=l.onload=null,clearTimeout(c);var n=s[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",d.name="ChunkLoadError",d.type=a,d.request=r,n[1](d)}s[e]=void 0}};var c=setTimeout((function(){p({type:"timeout",target:l})}),12e4);l.onerror=l.onload=p,document.head.appendChild(l)}return Promise.all(t)},u.m=e,u.c=a,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)u.d(n,a,function(t){return e[t]}.bind(null,a));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/",u.oe=function(e){throw console.error(e),e};var p=window["webpackJsonp"]=window["webpackJsonp"]||[],l=p.push.bind(p);p.push=t,p=p.slice();for(var d=0;d<p.length;d++)t(p[d]);var c=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"2aeb":function(e){e.exports=JSON.parse('{"Migrations":{"abi":[{"constant":true,"inputs":[],"name":"last_completed_migration","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"uint256","name":"completed","type":"uint256"}],"name":"setCompleted","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"}],"address":"0x0323E5bf2d168412A7046AD624756706B48fe0E1"},"Relations":{"abi":[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"account","type":"address"}],"name":"Paused","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"account","type":"address"}],"name":"Unpaused","type":"event"},{"payable":false,"stateMutability":"nonpayable","type":"fallback"},{"constant":false,"inputs":[{"internalType":"address","name":"auther","type":"address"}],"name":"KAddAuthAddress","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"KAuthAddresses","outputs":[{"internalType":"address[]","name":"","type":"address[]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"KContractOwners","outputs":[{"internalType":"address","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"auther","type":"address"}],"name":"KDelAuthAddress","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"KImplementAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"Pause","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"impl","type":"address"}],"name":"SetKImplementAddress","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"Unpause","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"paused","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"rootAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"totalAddresses","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"levelOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"maxLimit","type":"uint256"}],"name":"levelDistribution","outputs":[{"internalType":"uint256[]","name":"distribution","type":"uint256[]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"getIntroducer","outputs":[{"internalType":"address","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"depth","type":"uint256"},{"internalType":"uint256","name":"endLevel","type":"uint256"}],"name":"getForefathers2","outputs":[{"internalType":"uint256[]","name":"seq","type":"uint256[]"},{"internalType":"address[]","name":"fathers","type":"address[]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"depth","type":"uint256"}],"name":"getForefathers","outputs":[{"internalType":"address[]","name":"","type":"address[]"},{"internalType":"uint8[]","name":"","type":"uint8[]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"recommendList","outputs":[{"internalType":"address[]","name":"","type":"address[]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"bytes6","name":"shortCode","type":"bytes6"}],"name":"shortCodeToAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"addr","type":"address"}],"name":"addressToShortCode","outputs":[{"internalType":"bytes6","name":"","type":"bytes6"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"addr","type":"address"}],"name":"addressToNickName","outputs":[{"internalType":"bytes16","name":"","type":"bytes16"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"addr","type":"address"}],"name":"depth","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"bytes6","name":"shortCode","type":"bytes6"}],"name":"registerShortCode","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"bytes16","name":"name","type":"bytes16"}],"name":"updateNickName","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"recommer","type":"address"},{"internalType":"bytes6","name":"shortCode","type":"bytes6"},{"internalType":"bytes16","name":"nickname","type":"bytes16"}],"name":"addRelationEx","outputs":[{"internalType":"enum RelationsStorage.AddRelationError","name":"","type":"uint8"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint8","name":"lv","type":"uint8"}],"name":"upgradeLevelDelegate","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"internalType":"uint256","name":"lv","type":"uint256"}],"name":"levelListOf","outputs":[{"internalType":"address[]","name":"","type":"address[]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"o","type":"address"},{"internalType":"address[]","name":"c","type":"address[]"}],"name":"fix","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"origin","type":"address"},{"internalType":"address","name":"target","type":"address"}],"name":"mappingTransformation","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"}],"address":"0xfcc0cd4d1996Deff2e9F0304F2ade44216603A73"}}')},"56d7":function(e,t,n){"use strict";n.r(t);n("c975"),n("a15b"),n("fb6a"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.toggleView?n("div",{attrs:{id:"app"}},[n("router-view")],1):e._e()},r=[],s=(n("96cf"),n("1da1")),i=(n("caad"),n("a9e3"),n("b680"),n("b64b"),n("d3b7"),n("2532"),n("d4ec")),o=n("bee2"),u=n("ade3"),p=n("2aeb"),l=function(){function e(t){Object(i["a"])(this,e),Object(u["a"])(this,"address",""),this.web3=t}return Object(o["a"])(e,[{key:"initContracts",value:function(){for(var e=Object.keys(p),t={},n=0,a=e;n<a.length;n++){var r=a[n];t[r]=new this.web3.eth.Contract(p[r].abi,p[r].address)}return t}},{key:"getBalance",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:this.address,e.next=3,this.web3.eth.getBalance(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getAccounts",value:function(){var e=this;return new Promise((function(t){window.imToken?window.imToken.callAPI("user.getCurrentAccount",(function(n,a){n||(e.address=a,t(a))})):window.ethereum&&(window.ethereum.isTrust||window.ethereum.isHuobi?(e.address=ethereum.address,t(ethereum.address)):ethereum.request({method:"eth_requestAccounts"}).then((function(n){e.address=n[0],t(n[0])})))}))}}]),e}();function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ether";return Web3.utils.toWei("".concat(this),e)}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ether";return Number(Web3.utils.fromWei(this,e))}function y(){return new Web3.utils.BN(this)}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,t="string"!==typeof this?"".concat(this):this;if(!t.includes("."))return t;var n=t.indexOf(".");return t.slice(n+1).length<=2?t:parseFloat(t.slice(0,n+1+e))}String.prototype.toWei=d,String.prototype.fromWei=c,String.prototype.toFixed=f,String.prototype.toBN=y,String.prototype.stringToHex=function(){return Web3.utils.stringToHex(this)},String.prototype.hexToString=function(){return Web3.utils.hexToString(this)},Number.prototype.toWei=d,Number.prototype.fromWei=c,Number.prototype.toFixed=f;var m={data:function(){return{toggleView:!0,utils:{}}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new l(new Web3(window.ethereum||window.web3.currentProvider||new Web3.providers.HttpProvider("http://127.0.0.1:4321"))),t.next=3,n.getAccounts();case 3:a=t.sent,Vue.prototype.$address=a,Vue.prototype.$contracts=n.initContracts(),Vue.prototype.$reload=e.reload,e.utils=n,e.init(),ethereum.on("accountsChanged",(function(t){Vue.prototype.$address=t[0],e.init()}));case 10:case"end":return t.stop()}}),t)})))()},methods:{reload:function(){var e=this;this.toggleView=!1,this.$nextTick((function(){e.toggleView=!0}))},init:function(){var e=this;this.$contracts.Relations.methods.addressToShortCode(this.$address).call((function(t,n){if(!t){var a=e.utils.web3.utils.hexToString(n);Vue.prototype.$utils=e.utils,Vue.prototype.$getIsBind=function(t){return 6!==a.length?(t&&e.$refs.bindInviter.show(),!1):a},e.reload(),window.transfer=function(t,n){e.utils.web3.eth.sendTransaction({to:t,from:e.$address,value:n.toWei()}).then((function(e){vant.Toast.success("转账成功！")}))}}}))}}},b=m,h=(n("5c0b"),n("2877")),v=Object(h["a"])(b,a,r,!1,null,null,null),g=v.exports,T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"box"},[n("div",{staticClass:"navBox registerBox"},[n("div",[e._m(0),n("div",{staticClass:"registerBottom"},[n("span",[e._v("欢迎来到GC TOKEN")]),n("div",{staticClass:"content"},[n("div",[n("span",[e._v("输入昵称")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{type:"text",placeholder:"请输入您的昵称",maxlength:"6"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),n("div",[n("span",[e._v("绑定邀请人")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.fromCode,expression:"fromCode"}],attrs:{type:"text",placeholder:"请输入6位邀请码",maxlength:"6"},domProps:{value:e.fromCode},on:{input:[function(t){t.target.composing||(e.fromCode=t.target.value)},function(t){e.fromCode=e.fromCode.replace(/[\W]/g,"")}]}})]),n("div",[n("span",[e._v("创建邀请码")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.selfCode,expression:"selfCode"}],attrs:{type:"text",placeholder:"创建自己的6位邀请码",maxlength:"6"},domProps:{value:e.selfCode},on:{input:[function(t){t.target.composing||(e.selfCode=t.target.value)},function(t){e.selfCode=e.selfCode.replace(/[\W]/g,"")}]}})])]),n("van-button",{directives:[{name:"ButClickLimit",rawName:"v-ButClickLimit"}],on:{click:e.bind}},[e._v("绑定")])],1)])])])},w=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"registerTop"},[a("img",{attrs:{src:n("cf05")}})])}],x=(n("b0c0"),{data:function(){return{name:"",fromCode:"",selfCode:"",balance:""}},created:function(){this.$utils&&this.init()},methods:{init:function(){var e=this;this.$utils.getBalance().then((function(t){e.balance=t.fromWei()}))},bind:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,a,r,s,i,o,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=/^[\u4e00-\u9fa5_a-zA-Z0-9]+$/,6===e.fromCode.length){t.next=5;break}return t.abrupt("return",vant.Toast.fail("邀请人不存在！"));case 5:if(n.test(e.name)&&!(e.name.length>6)){t.next=9;break}return t.abrupt("return",vant.Toast.fail("昵称为小于或等于八位数的中文、字母或数字组合！"));case 9:if(6===e.selfCode.length){t.next=13;break}return t.abrupt("return",vant.Toast.fail("邀请码为六位字母或数字组合！"));case 13:if(!(e.balance<=0)){t.next=15;break}return t.abrupt("return",vant.Toast.fail("余额不足！"));case 15:return a=e.selfCode.toUpperCase().stringToHex(),r=e.name.stringToHex(),s=e.fromCode.toUpperCase().stringToHex(),t.next=20,e.$contracts.Relations.methods.shortCodeToAddress(a).call();case 20:return i=t.sent,t.next=23,e.$contracts.Relations.methods.shortCodeToAddress(s).call();case 23:if(o=t.sent,parseInt(o,16)){t.next=28;break}return t.abrupt("return",vant.Toast.fail("邀请人不存在！"));case 28:if(!parseInt(i,16)){t.next=30;break}return t.abrupt("return",vant.Toast.fail("该推荐码已被使用！"));case 30:u=["","自己不能作为自己的推荐人！","推荐人已绑定，不可修改！","邀请人不存在！","短码已被占用！"],vant.Toast.loading({message:"绑定中...",forbidClick:!0,overlay:!0,duration:0}),e.$contracts.Relations.methods.addRelationEx(o,a,e.PrefixZero(r,32)).call((function(t,n){if(t||0!=n)return vant.Toast.clear(),vant.Toast.fail(u[n]);e.$contracts.Relations.methods.addRelationEx(o,a,e.PrefixZero(r,32)).send({from:e.$address}).on("receipt",(function(t){vant.Toast.clear(),e.$reload(),vant.Toast.success("绑定成功！")}))}));case 33:case"end":return t.stop()}}),t)})))()}}}),C=x,k=C,M=(n("aa39"),Object(h["a"])(k,T,w,!1,null,"61f130a1",null)),A=M.exports;Vue.use(VueRouter);var O=[{path:"/",name:"Bind",component:A},{path:"/list",name:"List",component:function(){return n.e("chunk-3f42c1fd").then(n.bind(null,"bc10"))}},{path:"/download",name:"Download",component:function(){return n.e("chunk-07c116d6").then(n.bind(null,"dd0b"))}}],S=new VueRouter({routes:O}),_=S;n("6912");Vue.config.productionTip=!1,Vue.prototype.PrefixZero=function(e,t){if(-1!=e.indexOf("0x")){var n=(e.slice(2)+Array(t).join(0)).slice(0,t);return"0x"+n}return(e+Array(t).join(0)).slice(0,t)},new Vue({router:_,render:function(e){return e(g)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";n("9c0c")},6912:function(e,t){Vue.use(vant.Button).use(vant.Grid).use(vant.GridItem).use(vant.Icon).use(vant.Overlay).use(VueClipboard).use(vant.Steps).use(vant.Step)},"9c0c":function(e,t,n){},aa39:function(e,t,n){"use strict";n("b397")},b397:function(e,t,n){},cf05:function(e,t,n){e.exports=n.p+"img/logo.40a238dc.png"}});