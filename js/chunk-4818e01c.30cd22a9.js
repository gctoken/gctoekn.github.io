(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4818e01c"],{"3d76":function(t,e,a){"use strict";a("6c31")},"6c31":function(t,e,a){},cc6d:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("van-overlay",{staticClass:"bind-inviter",attrs:{show:t.visbily}},[a("div",[a("div",{staticClass:"title"},[a("span",{domProps:{textContent:t._s(t.$t("app.text11"))}}),a("van-icon",{attrs:{name:"cross"},nativeOn:{click:function(e){t.visbily=!1}}})],1),a("span",{staticClass:"before",attrs:{"data-v-f1a70bea":""}},[t._v(" Green Carbon Token ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.inviterCode,expression:"inviterCode"}],attrs:{type:"text",placeholder:t.$t("app.text2")},domProps:{value:t.inviterCode},on:{input:function(e){e.target.composing||(t.inviterCode=e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.selfCode,expression:"selfCode"}],attrs:{type:"text",placeholder:t.$t("app.text3"),maxlength:"6"},domProps:{value:t.selfCode},on:{input:function(e){e.target.composing||(t.selfCode=e.target.value)}}}),a("van-button",{attrs:{disabled:t.isDisabled,color:t.changeColor},on:{click:t.bind}},[t._v(t._s(t.$t("app.text4")))])],1)])},r=[],s=a("5530"),o=(a("a9e3"),a("96cf"),a("1da1")),i={data:function(){return{visbily:!1,inviterCode:null,selfCode:null,isDisabled:!1,changeColor:""}},created:function(){this.$contracts},methods:{show:function(){this.visbily=!0},bind:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,n,r,s,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!=t.inviterCode&&null!=t.selfCode){e.next=2;break}return e.abrupt("return",vant.Toast.fail(t.$t("app.text12")));case 2:if(!(t.selfCode.length<6)){e.next=4;break}return e.abrupt("return",vant.Toast.fail(t.$t("app.text5")));case 4:return a=t.selfCode.toLowerCase()+".gct",n=t.inviterCode.toLowerCase()+".gct",r=t.$web3.utils.isAddress(t.inviterCode),e.next=9,t.$contracts.CNS.methods.addressOfDomain(a).call();case 9:if(s=e.sent,o="",!Boolean(Number(s))){e.next=15;break}return e.abrupt("return",vant.Toast.fail(t.$t("app.text8")));case 15:if(!r){e.next=19;break}o=t.inviterCode,e.next=24;break;case 19:return e.next=21,t.$contracts.CNS.methods.addressOfDomain(n).call();case 21:if(o=e.sent,Boolean(Number(o))){e.next=24;break}return e.abrupt("return",vant.Toast.fail(t.$t("app.text7")));case 24:i=t.$contracts.Relations.methods,i.makeRelation(o,a).call({from:t.$address},(function(e,n){if(e)return vant.Toast.fail(t.$t("app.text7"));i.makeRelation(o,a).send({from:t.$address}).on("transactionHash",(function(e){t.visbily=!1,t.$emit("reload"),vant.Toast.clear(),vant.Toast.success(t.$t("app.text9"))})).on("error",(function(e){vant.Toast.clear(),vant.Toast.fail(t.$t("app.text10"))}))}));case 26:case"end":return e.stop()}}),e)})))()}}},c=Object(s["a"])({},i),l=c,d=(a("3d76"),a("2877")),u=Object(d["a"])(l,n,r,!1,null,"3842bb4f",null);e["default"]=u.exports}}]);