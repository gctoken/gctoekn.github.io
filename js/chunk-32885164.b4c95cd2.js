(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-32885164"],{"0039":function(e,t,n){"use strict";n("433d")},"08a7":function(e,t,n){e.exports=n.p+"img/info-bg.f3b1a3b1.png"},"433d":function(e,t,n){},b6fb:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"home"},[o("div",{staticClass:"info"},[o("div",{staticClass:"info-card",style:"background-image:url("+n("08a7")+")"},[o("div",{staticClass:"header"},[o("img",{attrs:{src:n("3989")}}),o("router-link",{attrs:{to:"/record"}},[o("span",{domProps:{textContent:e._s(e.$t("home.text1"))}}),o("img",{attrs:{src:n("fed8")}})])],1),o("div",{staticClass:"income"},[o("span",{domProps:{textContent:e._s(e.income)}}),e.$isBind?o("van-button",{attrs:{disabled:e.isDisabled,color:e.changeColor},on:{click:e.settlement}},[e._v(e._s(e.$t("home.text2")))]):o("van-button",{on:{click:e.generate}},[e._v(e._s(e.$t("app.text11")))])],1),o("div",{staticClass:"powers"},[o("div",[o("span",{domProps:{textContent:e._s(e.pledgePower)}}),o("span",{domProps:{textContent:e._s(e.$t("home.text3"))}})]),o("i"),o("div",[o("span",{domProps:{textContent:e._s(e.linkPower)}}),o("span",{domProps:{textContent:e._s(e.$t("home.text4"))}})])])])]),o("div",{staticClass:"navbar"},[o("div",{staticClass:"navbar-item",class:{active:"burning-dig"===e.active},on:{click:function(t){e.active="burning-dig"}}},[o("span",{domProps:{textContent:e._s(e.$t("home.text6"))}})]),o("div",{staticClass:"navbar-item",class:{active:"spread-mining"===e.active},on:{click:function(t){e.active="spread-mining"}}},[o("span",{domProps:{textContent:e._s(e.$t("home.text7"))}})])]),"burning-dig"===e.active?o("burning-dig",{attrs:{"burn-power":e.burnPower,balance:e.balance},on:{reload:e.init}}):e._e(),o("spread-mining",{directives:[{name:"show",rawName:"v-show",value:"spread-mining"===e.active,expression:"active === 'spread-mining'"}]})],1)},a=[],i=n("5530"),s=(n("b680"),n("d3b7"),n("25f0"),n("96cf"),n("1da1")),r={components:{"burning-dig":function(){return Promise.all([n.e("chunk-4f8bf5b6"),n.e("chunk-2d0e6c3b")]).then(n.bind(null,"04b6"))},"spread-mining":function(){return n.e("chunk-273c0a9c").then(n.bind(null,"26ae"))}},data:function(){return{active:"burning-dig",address:"",income:0,pledgePower:0,linkPower:0,isDisabled:!1,changeColor:""}},created:function(){this.$contracts&&this.init()},methods:{init:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.$web3.eth.getBalance(e.$address).then((function(t){e.balance=t.fromWei().toFixed(),e.$store.commit("balance",e.balance)})),t.next=4,e.$contracts.HaloConsensus.methods.nodeInfomationOf(e.$address).call({from:e.$address});case 4:n=t.sent,e.$store.commit("myPledge",n.pledge.fromWei()),0!=n.pledge.fromWei()&&e.$contracts.HaloConsensus.methods.withdrawPledgeReward().call({from:e.$address},(function(t,n){t||(e.pledgePower=n.pledgeReward.fromWei().toFixed(4),e.linkPower=n.linkReward.fromWei().toFixed(4),e.income=n.pledgeReward.toBN().add(n.linkReward.toBN()).toString().fromWei().toFixed(4),e.$store.commit("pledgePower",e.pledgePower),e.$store.commit("income",e.income))})),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},generate:function(){this.$getIsBind(!0)},settlement:function(){var e=this;if(""==this.income||void 0==this.income||0==this.income)vant.Toast.fail(this.$t("home.text8"));else try{this.isDisabled=!0,this.changeColor="#dcdcdc",vant.Toast.loading({message:this.$t("home.text41"),loadingType:"spinner",forbidClick:!0,duration:0}),this.$contracts.HaloConsensus.methods.withdrawPledgeReward().send({from:this.$address}).on("transactionHash",(function(t){e.$reload(),vant.Toast.clear(),vant.Toast.success(e.$t("home.text9")),setTimeout((function(){e.isDisabled=!1,e.changeColor="linear-gradient(134deg, #89BBFD 0%, #0F8EFF 100%)"}),2e3)})).on("error",(function(t){vant.Toast.clear(),vant.Toast.fail(e.$t("home.text43")),setTimeout((function(){e.isDisabled=!1,e.changeColor="linear-gradient(134deg, #89BBFD 0%, #0F8EFF 100%)"}),2e3)}))}catch(t){}}}},c=Object(i["a"])({},r),d=c,l=(n("0039"),n("2877")),u=Object(l["a"])(d,o,a,!1,null,"5d251199",null);t["default"]=u.exports},fed8:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAw1BMVEUAAAAAAACAgICSpKqOoKyNnaiSoayPnq2OoaqPoa6PoK2Pn6uRoa2RoKuOoKuPoauPoK2OnquPoaqQn6uPoKyOn6qOnqyRoKuPn6yQn6yRoK2PoKyOn6uPoKyQoayPn6yPoKuQnquQoK2QoKuQoayQoKuQoKyQoKyRoKyQn6uPn6yPoKyQoK2PoK2Pn6uPn6uRoKyQoKyPoKyQoKyPoKuQoKyQoKyQoKuQoKyPoKuQoKuPoKuPoKyQoKuQn6uPoKyQoKwo+qBfAAAAQXRSTlMAAQIqKy8xMjY5O0BBQ0ZJS09UVVlaX2FiZWZpamtscnZ8fIOKjI6Tlpidn6GkydLS3Obq6+zv8fH09Pb29/r7/J/T41cAAACJSURBVBgZBcEHYsEAAADAC2rWLGpvonbtFfr/V/XObw1sWwDl6BsKjy5AMWpD7jYAKDz7kL2OAXK3IaTPU4DsdQLJ0zwApM8hfBwWMUDyGEJ8vwKkDj+Q2K+BzCUMkDotY+DzPoXMZR6AUjSC/H0GVF59KEVjoP5uw9drAHTeDaj/9QC7Ktg0Af+N/QyKXW9sUAAAAABJRU5ErkJggg=="}}]);